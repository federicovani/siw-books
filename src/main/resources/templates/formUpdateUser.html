<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SiwBooks</title>
	<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<nav class="navbar">
	<div class="navbar-container">
		<div class="navbar-logo">
			<a th:if="${isAdmin}" th:href="@{'/'}" th:text="'SiwBooks - Admin'"></a>
			<a th:if="${!isAdmin}" th:href="@{'/'}" th:text="'SiwBooks'"></a>
		</div>
		<ul class="navbar-menu">
			<li class="navbar-item"><a th:href="@{'/libro'}">Libri</a></li>
			<li class="navbar-item"><a th:href="@{'/autore'}">Autori</a></li>
			<li class="navbar-item">
				<a th:if="${isAnonymous}" th:href="'/login'" th:text="'Login/Registrati'"></a>
				<a th:if="${!isAnonymous}" th:href="'/logout'" th:text="'Logout'"></a>
			</li>
			<li th:if="${!isAnonymous}" class="navbar-item"><a th:href="@{'/user'}" th:text="${username}"></a></li>
		</ul>
	</div>
</nav>
<main>
	<section id="formLogin">
		<h2>Modifica il tuo Profilo</h2>

		<form action="#" th:action="@{'/formUpdateUser'}" method="post">
			<label for="nome">Nome</label>
			<input type="text" id="nome" name="nome" th:value="${user.name}" required>

			<label for="cognome">Cognome</label>
			<input type="text" id="cognome" name="cognome" th:value="${user.surname}" required>

			<label for="email">Email</label>
			<input type="text" id="email" name="email" th:value="${user.email}" required>

			<label for="username">Username:</label>
			<input type="text" id="username" name="username" th:value="${credentials.username}" required>

			<label for="vecchiaPassword">Vecchia Password</label>
			<input type="password" id="vecchiaPassword" name="vecchiaPassword" required>

			<label for="password">Nuova Password (Lascia vuoto se non vuoi cambiarla)</label>
			<input type="password" id="password" name="password">

			<div th:if="${messaggioErrore != null}" class="error-message">
				<p th:text="${messaggioErrore}" style="color: red;"></p>
			</div>

			<button type="submit">Salva modifiche</button>
			<a th:href="@{'/user'}" class="link"><button type="button">Annulla</button></a>
		</form>
	</section>
</main>
<footer>
	<p>&copy; 2025 SiwBooks. Tutti i diritti riservati.</p>
</footer>
</body>
</html>