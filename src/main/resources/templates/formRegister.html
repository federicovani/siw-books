<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiwBooks</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-logo">
            <a th:href="@{'/'}">SiwBooks</a>
        </div>
        <ul class="navbar-menu">
            <li class="navbar-item"><a th:href="@{'/libro'}">Libri</a></li>
            <li class="navbar-item"><a th:href="@{'/autore'}">Autori</a></li>
            <li class="navbar-item">
                <a th:href="${#authentication.authenticated} ? '/logout' : '/login'"
                   th:text="${#authentication.authenticated} ? 'Logout' : 'Login'">
                </a>
            </li>

        </ul>
    </div>
</nav>

<header>
    <h1>Registrazione</h1>
</header>

<section id="formLogin">
    <h2>Registrazione nuovo Utente</h2>
    <form th:action="@{/register}" method="POST">
        <div>
            <label>Username</label>
            <span>
                    <input type="text" placeholder="Username" required th:field="${credentials.username}" />
                </span>
            <span th:if="${#fields.hasErrors('credentials.username')}" th:errors="${credentials.username}"
                  th:style="'color:red'">
                </span>
        </div>
        <div>
            <label>Password</label>
            <span><input type="password" placeholder="Password" required th:field="${credentials.password}" />
                </span>
            <span th:if="${#fields.hasErrors('credentials.password')}" th:errors="${credentials.password}"
                  th:style="'color:red'">
                </span>
        </div>
        <div>
            <label>Nome</label>
            <span><input type="text" placeholder="Nome" required th:field="${user.name}" /></span>
            <span th:if="${#fields.hasErrors('user.name')}" th:errors="${user.name}" th:style="'color:red'">
                </span>
        </div>
        <div>
            <label>Cognome</label>
            <span><input type="text" placeholder="Cognome" required th:field="${user.surname}" /></span>
            <span th:if="${#fields.hasErrors('user.surname')}" th:errors="${user.surname}" th:style="'color:red'">
                </span>
        </div>
        <div>
            <label>Email</label>
            <span><input type="text" placeholder="Email" required th:field="${user.email}" /></span>
            <span th:if="${#fields.hasErrors('user.email')}" th:errors="${user.email}" th:style="'color:red'">
                </span>
        </div>
        <div>
            <span th:if="${usernameError != null}"} style="color:red;">Username già in uso.</span>
        </div>
        <div>
            <button type="submit">Registrati</button>
            <a th:href="@{/login}" class="link"><button type="button">Login</button></a>
        </div>
    </form>
</section>
<footer>
    <p>© 2025 SiwBooks - Tutti i diritti riservati</p>
</footer>
</body>
</html>